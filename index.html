<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.js"></script>

<style>
.clear-weather {
    background:url(http://previews.123rf.com/images/sumos/sumos0702/sumos070200123/755361-Landscape-photo-of-a-valley-in-a-clear-weather-sign-on-ground-says-no-camping-fishing-area-Stock-Photo.jpg);
}
    
     
.clouds-weather {
    background:url(http://report.az/storage/news/b6561e5fd06e28947a3fbb2c8e6a221e/731c8a5a-fe4e-449d-bcef-337dcdb7791e.jpg);
}
</style>
<script>
    
(function(){
  var app = angular.module('weatherApp',[]);
    
    
    app.controller('weather', ['$scope', '$http', function($scope, $http){
         var we = this;
        we.units = "metric";
        we.getData = function() {
            
        we.unit = "F";
        we.loaded = false;
        if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position){
      $scope.$apply(function(){
        we.latitude= position.coords.latitude;
        we.longitude= position.coords.longitude;
      });
        $http.get('http://api.openweathermap.org/data/2.5/weather?lat='+we.latitude+'&lon='+we.longitude+'&appid=aa6c5b3dfad0cc8e64f430451b1a23a4&units='+we.units).then(function(response){
            console.log("The data is ", response.data.weather[0].main);
            we.weather = response.data.weather[0].main;
            console.log("Weather is ", we.weather);
            we.name = response.data.name;
            we.country = response.data.sys.country;
            we.temperature = response.data.main.temp;
            if(we.units == "metric")
            {
                we.unit = "C";
            }
            else we.unit = "F";
            we.clear= (we.weather == "Clear") ? true : false;
            we.cloud= (we.weather == "Clouds") ? true : false;
            we.loaded = true;
        });
    });
  }
        };
         we.getData();
    we.title = "AngularJS Blog App";
    we.toggleUnit= function(unit) {
        if(unit == "C") {
            we.units = "imperial";
        }
        else {
            we.units = "metric";
        }
            we.getData();
    };
    }]);
    
})();
</script>

<body ng-app="weatherApp">
    <div ng-controller="weather as we" style="text-align:center; width:100%; height:100%;"
         ng-class="{'clear-weather': we.clear, 'clouds-weather': we.cloud}">
        {{we.background}}
       <div style="padding-top:100px; padding-bottom:100px;">
         <h1 class="ui header"> AngularJS Weather App </h1>
        </div>
        <div ng-show="we.loaded">
            <h1> {{we.name}}, {{we.country}} </h1>
            <h2> {{we.weather}}</h2>
            <h2 ng-click="we.toggleUnit(we.unit)"> {{we.temperature}}&#176; {{we.unit}}</h2>
        </div>
    </div>

</body>
